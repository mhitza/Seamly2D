name: Test windows

on:
  push:
    branches:
      - develop
env:
  QT_SELECT: 5
  QT_VERSION: '5.13.2' # quotes required or YAML parser will interpret as float

jobs:
  test:
    runs-on: windows-latest
    steps:
      - uses: actions/checkout@v2
      - name: Add msbuild to PATH
        uses: microsoft/setup-msbuild@v1.0.0
      - uses: jurplel/install-qt-action@v2
        with:
          version: ${{ env.QT_VERSION }}
      - name: build
        run: |
          ls $Qt5_Dir
          #qmake.exe Seamly2D.pro -r CONFIG+=no_ccache CONFIG+=noDebugSymbols
          #msbuild
          #     - name: create & code sign installer
          #       run: |
          #         mkdir ..\windows-build
          #         Get-ChildItem -Recurse -Include *.exe,*.dll | % { Copy-Item $_.FullName -force -destination ..\windows-build }
          #         windeployqt.exe --libdir ..\windows-build --plugindir ..\windows-build --release ..\windows-build\seamly2d.exe
          #         windeployqt.exe --force --libdir ..\windows-build --plugindir ..\windows-build --release ..\windows-build\seamlyme.exe
          #         copy .\dist\seamly2d-installer.nsi ..\windows-build\
          #         copy .\dist\win\VC_redist.x86.exe ..\windows-build\
          #         copy .\dist\win\VC_redist.x64.exe ..\windows-build\
          #
          #         cd ..\windows-build\
          #         & 'C:\Program Files (x86)\NSIS\makensis.exe' seamly2d-installer.nsi
          #     - name: upload seamly2d-installer
          #       uses: actions/upload-artifact@v2
          #       with:
          #         name: installer
          #         path: ../windows-build/seamly2d-installer.exe
